\ProvidesPackage{thesis}

\usepackage[bindingoffset=6mm]{geometry} % compensate for binding in twopage.

%\pdfmajorversion = 2 % pdf version 2.0
\pdfminorversion = 7 % pdf version 1.7


\RequirePackage[norsk,english]{babel}
%\RequirePackage{thesis}
\RequirePackage{ragged2e}

\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}
\RequirePackage{lmodern} % font
%\RequirePackage{bookman} % font
%\RequirePackage{euler}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage{graphicx}
\RequirePackage{physics}
\RequirePackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{tikzmark}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{backgrounds}
\usetikzlibrary{fadings}
\RequirePackage{multicol}
\RequirePackage{mathtools}
\RequirePackage{mhchem}
\RequirePackage{caption}
\captionsetup[figure]{labelfont=bf}
\RequirePackage{subcaption}
%%%%%%%%%
% Toc things
\usepackage{etoolbox}
\patchcmd{\tableofcontents}{\@starttoc}{\vspace{-2cm}\@starttoc}{}{}
\RequirePackage[nottoc,numbib]{tocbibind}
\RequirePackage{emptypage} % Extremely handy. https://tex.stackexchange.com/a/161468/191229
\RequirePackage[titletoc]{appendix}
%%%%%%%%%%%%%%%%%%%
\RequirePackage{environ}
\makeatletter
\newsavebox{\measure@tikzpicture}
\NewEnviron{scaletikzpicturetowidth}[1]{%
	\def\tikz@width{#1}%
	\def\tikzscale{1}\begin{lrbox}{\measure@tikzpicture}%
		\BODY
	\end{lrbox}%
	\pgfmathparse{#1/\wd\measure@tikzpicture}%
	\edef\tikzscale{\pgfmathresult}%
	\BODY
}
\makeatother


\RequirePackage[colorlinks]{hyperref}
\makeatletter
\def\@footnotecolor{red}
\define@key{Hyp}{footnotecolor}{%
	\HyColor@HyperrefColor{#1}\@footnotecolor%
}
\def\@footnotemark{%
	\leavevmode
	\ifhmode\edef\@x@sf{\the\spacefactor}\nobreak\fi
	\stepcounter{Hfootnote}%
	\global\let\Hy@saved@currentHref\@currentHref
	\hyper@makecurrent{Hfootnote}%
	\global\let\Hy@footnote@currentHref\@currentHref
	\global\let\@currentHref\Hy@saved@currentHref
	\hyper@linkstart{footnote}{\Hy@footnote@currentHref}%
	\@makefnmark
	\hyper@linkend
	\ifhmode\spacefactor\@x@sf\fi
	\relax
}%
\makeatother
\hypersetup{
	linkcolor=green!40!black,
	citecolor=	cyan!70!black,
	footnotecolor = blue,
	linktocpage=true,
	urlcolor=blue}

\tikzset{->-/.style={decoration={
			markings,
			mark=at position #1 with {\arrow{>}}},postaction={decorate}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fancy page layout
\RequirePackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{\leftmark}
\fancyhead[LO]{\rightmark}
\renewcommand{\headrulewidth}{0pt}
\RequirePackage[Lenny]{fncychap}
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Epigraph tool %%%%%%
% Source: https://tex.stackexchange.com/a/65914/191229
\RequirePackage{epigraph}
\setlength\epigraphwidth{10cm}
\setlength\epigraphrule{0pt}
\RequirePackage{etoolbox}
\makeatletter
\patchcmd{\epigraph}{\@epitext{#1}}{\itshape\@epitext{#1}}{}{}
\makeatother

%%%%%%%
% Reference and Citation tools

\RequirePackage{doi} % links for doi
\RequirePackage[square, numbers, sort&compress]{natbib} % nice 
\bibliographystyle{custom_bibliography_style} % hack on unsrtnat
\RequirePackage{cleveref} % smart references

%%%%%%%%
% Other tools
\RequirePackage{bm} % bold symbold
\RequirePackage[disable]{todonotes} % add option [disable] to skip todo-notes.




\newcommand{\sumn}[2]{\sum_{\langle #1, #2\rangle}} % sum nearest neighbor
\newcommand{\sumne}[3]{\sum_{\langle #1, #2\rangle, #3}} % sum nearest neighbor
\newcommand{\sumnn}[2]{\sum_{\langle\hspace{-0.4ex}\langle #1, #2\rangle\hspace{-0.4ex}\rangle}} %sum next nearest
% Hamiltonians
\newcommand{\nnn}[1]{\langle\hspace{-0.4ex}\langle #1\rangle\hspace{-0.4ex}\rangle}
\newcommand{\hph}{H_{\text{ph}}}
\newcommand{\hfph}{H_{\text{f-ph}}} 
\newcommand{\hf}{H_{\text{f}}}
\newcommand{\hma}{H_{\text{m}}}
\newcommand{\cre}[1][]{c_{#1}^\dagger}
\newcommand{\anh}[1][]{c_{#1}}
\newcommand{\e}{\mathrm{e}}
\newcommand{\vk}{\bm{k}}
\newcommand{\vq}{\vb{q}}
\newcommand{\bd}{\bm{\bar \delta}}
\newcommand{\bde}{\bm{\delta}}
\newcommand{\bdx}{\bar{\delta}_{x}}
\newcommand{\bdy}{\bar{\delta}_{y}}
\newcommand{\ep}{\varepsilon}
\newcommand{\dg}{\dagger}
\newcommand{\rsum}[1]{\overline{\sum_{#1}}}
\newcommand{\vf}{\tilde{v}_F}
\newcommand{\thq}{\theta_q}
\newcommand{\normord}[1]{{}_{*}^{*}\mathrel{#1}{}_{*}^{*}}
\newcommand{\vr}{\varrho}
\newcommand{\vs}{\varsigma}
\newcommand{\expdiffa}[2]{\left (\e^{#1}\e^{#2} - 1\right )}
\newcommand{\expdiffb}[2]{\left (1- \e^{#1}\e^{#2}\right )}
\DeclareMathOperator{\sgn}{sgn} % Signum operator, 

\colorlet{mygreen}{green!50!black}
\colorlet{myorange}{orange!80!black}

